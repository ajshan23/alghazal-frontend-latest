import{ad as R,R as E,ak as M,v as L,r as b,j as o}from"./index-CeeixwyT.js";import{e as D,f as T,g as q}from"./api-CZtoAnjB.js";import"./Alert-Bneqgr9w.js";import{A as B}from"./index-mmtMoNc-.js";import"./Badge-gX0tozfu.js";import{B as I}from"./Button-Jcb4-1FV.js";import"./Calendar-DDQmp7qL.js";import{C as U}from"./Card-BQBA6p6d.js";import{C as F}from"./Skeleton-C0EwQ4tc.js";import"./index-DUUs1dD2.js";import"./Dialog-Ck_7IdoO.js";import"./Drawer-DcAp0mrF.js";import"./index-C7N1jnFJ.js";import"./FormItem-BUb2sV4Y.js";import"./useUniqueId-TLCMMOUH.js";import"./Input-DmwYaxHI.js";import"./index-DkboJ1vV.js";import"./index-DQk-hTl8.js";import"./toast-CHTOlw6g.js";import"./Progress-8GjLAAlI.js";import"./index-Bmt1xsRV.js";import"./ScrollBar-fYZM3tEj.js";import"./index-4WWjdv-g.js";import"./Select-p6SCkVmf.js";import"./Upload-BBODN93D.js";import"./index-DCo4Gr1c.js";import"./Tag-DmgLRT0B.js";import"./index-XlqP8V-J.js";import"./StatusIcon-Bubigwt3.js";import"./index-BpWQnGpb.js";import"./CloseButton-2RNqNt8_.js";import"./proxy-C_4Tkt-A.js";import"./floating-ui.react-Cj40Bhkr.js";import"./floating-ui.dom-D1IisfOw.js";import"./index-B-OKFECa.js";import"./useControllableState-Co-7uitg.js";import"./get-Bt-MXFuu.js";import"./Views-BbjjwvOo.js";import"./toString-CQ6Ple6g.js";import"./_getPrototype-DjRlJXxb.js";import"./index-DnlG-Pi4.js";import"./index-Chjiymov.js";import"./isNil-uaFVwcKt.js";import"./chainedFunction-BxZSneMW.js";import"./hoist-non-react-statics.cjs-Cjpy7quo.js";import"./index-Dy7CMnQV.js";var l={},_={},N;function V(){if(N)return _;N=1,Object.defineProperty(_,"__esModule",{value:!0}),_.parseLengthAndUnit=f,_.cssValue=p;var u={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function f(c){if(typeof c=="number")return{value:c,unit:"px"};var s,m=(c.match(/^[0-9.]*/)||"").toString();m.includes(".")?s=parseFloat(m):s=parseInt(m,10);var d=(c.match(/[^0-9]*$/)||"").toString();return u[d]?{value:s,unit:d}:(console.warn("React Spinners: ".concat(c," is not a valid css value. Defaulting to ").concat(s,"px.")),{value:s,unit:"px"})}function p(c){var s=f(c);return"".concat(s.value).concat(s.unit)}return _}var O={},S;function W(){if(S)return O;S=1,Object.defineProperty(O,"__esModule",{value:!0}),O.createAnimation=void 0;var u=function(f,p,c){var s="react-spinners-".concat(f,"-").concat(c);if(typeof window>"u"||!window.document)return s;var m=document.createElement("style");document.head.appendChild(m);var d=m.sheet,y=`
    @keyframes `.concat(s,` {
      `).concat(p,`
    }
  `);return d&&d.insertRule(y,0),s};return O.createAnimation=u,O}var k;function $(){if(k)return l;k=1;var u=l&&l.__assign||function(){return u=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},u.apply(this,arguments)},f=l&&l.__createBinding||(Object.create?function(t,r,n,e){e===void 0&&(e=n);var a=Object.getOwnPropertyDescriptor(r,n);(!a||("get"in a?!r.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(t,e,a)}:function(t,r,n,e){e===void 0&&(e=n),t[e]=r[n]}),p=l&&l.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),c=l&&l.__importStar||function(){var t=function(r){return t=Object.getOwnPropertyNames||function(n){var e=[];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[e.length]=a);return e},t(r)};return function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var e=t(r),a=0;a<e.length;a++)e[a]!=="default"&&f(n,r,e[a]);return p(n,r),n}}(),s=l&&l.__rest||function(t,r){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.indexOf(e)<0&&(n[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(t);a<e.length;a++)r.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(t,e[a])&&(n[e[a]]=t[e[a]]);return n};Object.defineProperty(l,"__esModule",{value:!0});var m=c(R()),d=V(),y=W(),x=(0,y.createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function C(t){var r=t.loading,n=r===void 0?!0:r,e=t.color,a=e===void 0?"#000000":e,i=t.speedMultiplier,v=i===void 0?1:i,g=t.cssOverride,w=g===void 0?{}:g,h=t.size,j=h===void 0?35:h,P=s(t,["loading","color","speedMultiplier","cssOverride","size"]),A=u({background:"transparent !important",width:(0,d.cssValue)(j),height:(0,d.cssValue)(j),borderRadius:"100%",border:"2px solid",borderTopColor:a,borderBottomColor:"transparent",borderLeftColor:a,borderRightColor:a,display:"inline-block",animation:"".concat(x," ").concat(.75/v,"s 0s infinite linear"),animationFillMode:"both"},w);return n?m.createElement("span",u({style:A},P)):null}return l.default=C,l}var G=$();const K=E(G),Ie=()=>{const{projectId:u}=M(),f=L(),[p,c]=b.useState([]),[s,m]=b.useState([]),[d,y]=b.useState([]),[x,C]=b.useState(""),[t,r]=b.useState(!0),[n,e]=b.useState(!1);b.useEffect(()=>{(async()=>{var v,g,w;try{r(!0);const[h,j]=await Promise.all([D(),T()]);console.log("engResponse",h.data.data.workers),console.log("drvResponse",j.data.data.drivers),c(((v=h.data.data)==null?void 0:v.workers)||[]),m(((w=(g=j.data)==null?void 0:g.data)==null?void 0:w.drivers)||[])}catch(h){console.error("Error fetching team members:",h)}finally{r(!1)}})()},[]);const a=async()=>{if(d.length===0||!x){alert("Please select at least one worker and a driver");return}try{e(!0),await q(u,{workers:d,driverId:x}),f(`/app/project-view/${u}`)}catch(i){console.error("Error assigning team:",i)}finally{e(!1)}};return t?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx(K,{color:"#3b82f6",size:50})}):o.jsx("div",{className:"container mx-auto px-4 h-full",children:o.jsx(U,{header:"Assign Team to Project",headerClass:"text-lg font-bold",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-4",children:"Select Workers"}),o.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[p.map(i=>o.jsxs("div",{className:"flex items-center p-2 border rounded dark:border-gray-600",children:[o.jsx(F,{checked:d.includes(i._id),onChange:()=>{y(v=>v.includes(i._id)?v.filter(g=>g!==i._id):[...v,i._id])}}),o.jsx(B,{className:"ml-3",src:i.profileImage}),o.jsxs("span",{className:"ml-2 dark:text-gray-200",children:[i.firstName," ",i.lastName]})]},i._id)),p.length===0&&o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No available engineers"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-4 dark:text-gray-200",children:"Select Driver"}),o.jsxs("select",{value:x,onChange:i=>C(i.target.value),className:"w-full border border-gray-300 rounded p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[o.jsx("option",{value:"",className:"dark:bg-gray-700 dark:text-gray-200",children:"Choose a driver"}),s.map(i=>o.jsxs("option",{value:i._id,className:"dark:bg-gray-700 dark:text-gray-200",children:[i.firstName," ",i.lastName]},i._id))]}),s.length===0&&o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:"No available drivers"}),o.jsx("div",{className:"mt-8",children:o.jsx(I,{variant:"solid",loading:n,onClick:a,className:"w-full",disabled:p.length===0||s.length===0,children:"Assign Team"})})]})]})})})};export{Ie as default};
