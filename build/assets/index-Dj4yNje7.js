import{r as t,j as s,c as I,ag as fe,ap as Ce,aq as pe}from"./index-CBK0URRE.js";import{i as U}from"./isNil-Cc0nJDWu.js";import{u as q}from"./useUniqueId-DuxEAYhz.js";import{A as ve}from"./index-B_Ah24CK.js";import{m as xe}from"./proxy-BwDlMs0o.js";import{c as L}from"./chainedFunction-BxZSneMW.js";import{ai as ae,aj as ie,ak as he,al as be}from"./index-BXubtGR5.js";const ee=t.createContext(null),ge=ee.Provider;function ce(e){const n=t.useRef(null);return e||n}const V=t.createContext({}),le=V.Provider;V.Consumer;function ne(e){const[n,d]=t.useState(!1),[o,C]=t.useState([]),[a,c]=t.useState(null),r=t.useRef(null),p=t.useCallback((i,l)=>{C(b=>[...b,{element:i,props:l}])},[]),m=t.useCallback(i=>{C(l=>l.filter(b=>{var v;return((v=b==null?void 0:b.element)==null?void 0:v.id)!==i}))},[]),x=t.useCallback(()=>{requestAnimationFrame(()=>{var i;document.activeElement!==e.current&&(r.current=document.activeElement,(i=e.current)==null||i.focus())})},[e]),f=t.useCallback(i=>{const l=o.indexOf(i);l!==-1&&(c(l),x())},[o,x]),u=t.useCallback((i,l)=>{var b;for(let v=i;v>-1&&v<o.length;v+=l)if(!((b=o[v].props)!=null&&b.disabled))return v;return null},[o]),M=t.useCallback(i=>{if(U(i))c(null),x();else{let l;i===0?l=u(0,1):i===-1&&(l=u(o.length-1,-1)),U(l)||f(o[l])}},[o,f,x,u]),w=t.useCallback(()=>{d(!0),x()},[x]),y=t.useCallback(()=>{d(!1),c(null),requestAnimationFrame(()=>{var i;(i=r.current)==null||i.focus()})},[]);return{open:n,items:o,activeItemIndex:a,registerItem:p,unregisterItem:m,focusItemAt:M,openMenu:w,closeMenu:y}}const Q=t.forwardRef((e,n)=>{const{children:d,activeKey:o,onSelect:C,hidden:a,placement:c,menuClass:r,...p}=e,m=ce(n),x=q("menu-"),f=ne(m),u=i=>{const l=`rotateX(${i}deg)`;return c&&c.includes("center")?`${l} translateX(-50%)`:l},M={opacity:1,visibility:"visible",transform:u(0)},w={opacity:0,visibility:"hidden",transform:u(40)},y=w;return s.jsx(ge,{value:{activeKey:o,onSelect:C},children:s.jsx(le,{value:f,children:s.jsx(ve,{mode:"wait",children:!a&&s.jsx(xe.ul,{ref:m,id:x,initial:y,animate:M,exit:w,transition:{duration:.15,type:"tween"},className:r,...p,children:d})})})})});Q.displayName="DropdownInnerMenu";const X=t.createContext(null);X.Provider;X.Consumer;const Z=t.forwardRef((e,n)=>{const{asElement:d="div",children:o,className:C,disabled:a,eventKey:c,isActive:r,menuItemHeight:p=35,onSelect:m,style:x,variant:f="light",...u}=e,i=I("menu-item",`menu-item-${f}`,r&&"menu-item-active",a&&"menu-item-disabled",!a&&"menu-item-hoverable",C),l=b=>{m&&m(c,b)};return s.jsx(d,{ref:n,className:i,style:{height:`${p}px`,...x},onClick:l,...u,children:o})});Z.displayName="BaseMenuItem";const{DEFAULT:Me,DIVIDER:oe,HEADER:Y,CUSTOM:z}=Ce,te=t.forwardRef((e,n)=>{const{asElement:d="li",children:o,active:C,disabled:a,className:c,submenu:r,style:p,eventKey:m,onClick:x,onSelect:f,variant:u=Me,...M}=e,{mode:w,direction:y}=fe(),i=ce(n),l=q("menu-item-"),b=t.useRef(null),v=t.useContext(X),h=t.useContext(ee),_=t.useContext(V),g=ne(b),F=g.open,j=C||!U(h==null?void 0:h.activeKey)&&(h==null?void 0:h.activeKey)===m||!U(v==null?void 0:v.activeKey)&&(v==null?void 0:v.activeKey)===m,N=t.useCallback(()=>{r&&(g.openMenu(),g.focusItemAt(0))},[r,g]),O=t.useCallback(S=>{var $;f==null||f(m,S),($=h==null?void 0:h.onSelect)==null||$.call(h,m,S)},[m,f,h]),B=t.useCallback(S=>{a||(r?N():O(S))},[a,r,N,O]),E=t.useCallback(()=>{r&&g.openMenu()},[r,g]),R=t.useCallback(()=>{r&&g.closeMenu()},[r,g]),k={onClick:L(B,x)},{registerItem:A,unregisterItem:P}=_??{};if(r&&(k.onMouseOver=E,k.onMouseOut=R),t.useEffect(()=>(u!==oe&&u!==Y&&(A==null||A(i.current,{disabled:a})),()=>{P==null||P(l)}),[A,P,i,l,a,u]),u===oe||u===Y||u===z)return s.jsx(d,{ref:i,id:l,style:p,className:I(`menu-item-${u}`,c),...u===z?k:{},...M,children:(u===Y||u===z)&&o});function K(){return t.isValidElement(o)?t.cloneElement(o):o}function D(){return r?s.jsx(le,{value:g,children:t.cloneElement(r,{ref:b,hidden:!F})}):null}return r?s.jsxs("li",{...M,style:p,className:"relative",...k,children:[s.jsxs(Z,{ref:i,asElement:"div",id:l,isActive:j,eventKey:m,variant:w,className:I("dropdown-submenu-item",c),children:[s.jsx("span",{children:o}),y==="rtl"?s.jsx(ae,{}):s.jsx(ie,{})]}),D()]}):s.jsxs(Z,{ref:i,asElement:"li",style:p,isActive:j,disabled:a,eventKey:m,variant:w,className:c,...k,...M,children:[K(),D()]})});te.displayName="DropdownItem";const se=t.forwardRef((e,n)=>{const{eventKey:d,title:o,className:C,placement:a,...c}=e,r=t.useContext(ee),p="dropdown-menu",x=I(p,a,C),f=I(p,"dropdown-submenu"),u=s.jsx(Q,{ref:n,className:f,placement:a,...c});if(r){const M=I(C);return s.jsx(te,{className:M,submenu:u,eventKey:d,children:o})}return s.jsx(Q,{ref:n,className:x,placement:a,...c})});se.displayName="DropdownMenu";const we=({placement:e,children:n})=>e&&e.includes("middle-start")?s.jsxs(s.Fragment,{children:[n,s.jsx(ie,{})]}):e&&e.includes("middle-end")?s.jsxs(s.Fragment,{children:[s.jsx(ae,{}),n]}):e&&e.includes("top")?s.jsxs(s.Fragment,{children:[n,s.jsx(he,{})]}):s.jsxs(s.Fragment,{children:[n,s.jsx(be,{})]}),ue=t.forwardRef((e,n)=>{const{className:d,renderTitle:o,children:C,placement:a="bottom-start",disabled:c,toggleClassName:r,...p}=e,f=I("dropdown-toggle",d,r,c&&"dropdown-toggle-disabled"),u=I(f,"dropdown-toggle-default");return o?s.jsx("div",{className:f,...p,ref:n,children:o}):s.jsx("div",{ref:n,className:u,...p,children:s.jsx("span",{className:"flex items-center",children:s.jsx(we,{placement:a,children:C})})})});ue.displayName="DropdownToggle";const re=(e,n)=>{if(e.contains)return e.contains(n);if(e.compareDocumentPosition)return e===n||!!(e.compareDocumentPosition(n)&16);if(n)do if(n===e)return!0;while(n=n.parentNode);return!1},Ee=e=>e&&("current"in e?e.current:e);function G(e){const n=(e==null?void 0:e.root)||(e==null?void 0:e.child)||Ee(e);return n!=null&&n.nodeType&&typeof(n==null?void 0:n.nodeName)=="string",n}function ye(e){return(e==null?void 0:e.button)===0}function je(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e!=null&&e.shiftKey)}function Ie(e,n,d,o=!1){return e.addEventListener(n,d,o),{off(){e.removeEventListener(n,d,o)}}}function Ne(e,{disabled:n,triggerTarget:d,overlayTarget:o}){const C=t.useCallback(a=>{const c=G(d),r=G(o);c&&re(c,a.target)||r&&re(r,a.target)||je(a)||!ye(a)||e==null||e(a)},[e,d,o]);t.useEffect(()=>{const a=G(d);if(n||!a)return;const r=Ie(a&&a.ownerDocument||document,"mousedown",C,!0);return()=>{r==null||r.off()}},[d,n,e,C])}function J(e,n){return Array.isArray(n)?n.indexOf(e)>=0:e===n}const{BOTTOM_START:ke}=pe,De="click",Ae="hover",Pe="context",de=t.forwardRef((e,n)=>{const{title:d,children:o,menuClass:C,menuStyle:a,disabled:c,renderTitle:r,placement:p=ke,activeKey:m,toggleClassName:x,trigger:f="click",style:u,onClick:M,onMouseEnter:w,onMouseLeave:y,onContextMenu:i,onSelect:l,onOpen:b,onClose:v,onToggle:h,..._}=e,g=t.useRef(null),F=t.useRef(null),j=ne(g),N=j.open,O=q("dropdown-toggle-"),B=q("base-menu-"),E=t.useCallback(T=>{const H=typeof T>"u"?!N:T,W=H?b:v;W==null||W(),h==null||h(H),H?j.openMenu():j.closeMenu()},[v,b,h,N,j]),R=t.useCallback(T=>{T.preventDefault(),!c&&E()},[c,E]),k=t.useCallback(()=>{c||E(!0)},[c,E]),A=t.useCallback(()=>{c||E(!1)},[c,E]),P=(T,H)=>{l==null||l(T,H),E(!1)};Ne(()=>E(),{triggerTarget:F,overlayTarget:g,disabled:!N,listenEscape:!1});const K={onMouseEnter:w,onMouseLeave:y},D={onClick:M,onContextMenu:i};J(De,f)&&(D.onClick=L(R,D.onClick)),J(Pe,f)&&(D.onContextMenu=L(R,i)),J(Ae,f)&&(K.onMouseEnter=L(k,w),K.onMouseLeave=L(A,y));const S=s.jsx(ue,{..._,...D,ref:F,id:O,className:x,renderTitle:r,disabled:c,placement:p,children:d}),$=s.jsx(se,{ref:g,className:C,style:a,activeKey:m,hidden:!N,placement:p,id:B,onSelect:P,children:o});return s.jsx(X.Provider,{value:{activeKey:m},children:s.jsxs("div",{...K,ref:n,style:u,className:"dropdown",children:[S,s.jsx(V.Provider,{value:j,children:$})]})})});de.displayName="Dropdown";const me=de;me.Item=te;me.Menu=se;export{me as D,Z as M,ce as a,Ne as u};
