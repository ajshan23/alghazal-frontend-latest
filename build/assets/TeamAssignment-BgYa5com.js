import{ad as R,R as E,ak as M,v as L,r as b,j as o}from"./index-D5qsHBPI.js";import{e as D,f as T,g as q}from"./api-S-NqIDfJ.js";import"./Alert-C5ubLdhu.js";import{A as B}from"./index-BVZVTO7z.js";import"./Badge-Dxo-y_KI.js";import{B as I}from"./Button-DKlp8XN1.js";import"./Calendar-DWCnCoFE.js";import{C as U}from"./Card-yHUwp5an.js";import{C as F}from"./Skeleton-Dmiutfuv.js";import"./index-BO9RL4R9.js";import"./Dialog-Dhhpr09S.js";import"./Drawer-BUEyqvQR.js";import"./index-DJHxYRo4.js";import"./FormItem-BjAM8sYA.js";import"./useUniqueId-CheqgfIm.js";import"./Input-DpzrnPB-.js";import"./index-QOERWN9e.js";import"./index-CPVaYfOj.js";import"./toast-BV-KR3on.js";import"./Progress-DzB5YKhk.js";import"./index-CrE-Oq-m.js";import"./ScrollBar-BNGPRGE7.js";import"./index-sVsNsozN.js";import"./Select-DCy0le_o.js";import"./Upload-B1VqOR8x.js";import"./index-WwDzlDyh.js";import"./Tag-DuBUDIYz.js";import"./index-DmRycXSQ.js";import"./StatusIcon-B-JCnJup.js";import"./index-Bjc1-Dfl.js";import"./CloseButton-CYqIcWKK.js";import"./proxy-QQ9UH2Rr.js";import"./floating-ui.react-CtRk2jQd.js";import"./floating-ui.dom-D1IisfOw.js";import"./index-CKN0MgBz.js";import"./useControllableState-OCPLuC6T.js";import"./get-BV5slyYd.js";import"./Views-B1b09e4F.js";import"./toString-kQNaAZON.js";import"./_getPrototype-07QB_bHq.js";import"./index-BKrnPZdN.js";import"./index-Chjiymov.js";import"./isNil-BKogIPw7.js";import"./chainedFunction-BxZSneMW.js";import"./index-byIxUKR0.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-CTX8E6kM.js";import"./index-C6AW9Bce.js";var l={},_={},N;function V(){if(N)return _;N=1,Object.defineProperty(_,"__esModule",{value:!0}),_.parseLengthAndUnit=f,_.cssValue=p;var u={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function f(c){if(typeof c=="number")return{value:c,unit:"px"};var s,m=(c.match(/^[0-9.]*/)||"").toString();m.includes(".")?s=parseFloat(m):s=parseInt(m,10);var d=(c.match(/[^0-9]*$/)||"").toString();return u[d]?{value:s,unit:d}:(console.warn("React Spinners: ".concat(c," is not a valid css value. Defaulting to ").concat(s,"px.")),{value:s,unit:"px"})}function p(c){var s=f(c);return"".concat(s.value).concat(s.unit)}return _}var O={},S;function W(){if(S)return O;S=1,Object.defineProperty(O,"__esModule",{value:!0}),O.createAnimation=void 0;var u=function(f,p,c){var s="react-spinners-".concat(f,"-").concat(c);if(typeof window>"u"||!window.document)return s;var m=document.createElement("style");document.head.appendChild(m);var d=m.sheet,y=`
    @keyframes `.concat(s,` {
      `).concat(p,`
    }
  `);return d&&d.insertRule(y,0),s};return O.createAnimation=u,O}var k;function $(){if(k)return l;k=1;var u=l&&l.__assign||function(){return u=Object.assign||function(t){for(var r,i=1,e=arguments.length;i<e;i++){r=arguments[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},u.apply(this,arguments)},f=l&&l.__createBinding||(Object.create?function(t,r,i,e){e===void 0&&(e=i);var a=Object.getOwnPropertyDescriptor(r,i);(!a||("get"in a?!r.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,e,a)}:function(t,r,i,e){e===void 0&&(e=i),t[e]=r[i]}),p=l&&l.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),c=l&&l.__importStar||function(){var t=function(r){return t=Object.getOwnPropertyNames||function(i){var e=[];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[e.length]=a);return e},t(r)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var e=t(r),a=0;a<e.length;a++)e[a]!=="default"&&f(i,r,e[a]);return p(i,r),i}}(),s=l&&l.__rest||function(t,r){var i={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.indexOf(e)<0&&(i[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(t);a<e.length;a++)r.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(t,e[a])&&(i[e[a]]=t[e[a]]);return i};Object.defineProperty(l,"__esModule",{value:!0});var m=c(R()),d=V(),y=W(),x=(0,y.createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function C(t){var r=t.loading,i=r===void 0?!0:r,e=t.color,a=e===void 0?"#000000":e,n=t.speedMultiplier,v=n===void 0?1:n,g=t.cssOverride,w=g===void 0?{}:g,h=t.size,j=h===void 0?35:h,P=s(t,["loading","color","speedMultiplier","cssOverride","size"]),A=u({background:"transparent !important",width:(0,d.cssValue)(j),height:(0,d.cssValue)(j),borderRadius:"100%",border:"2px solid",borderTopColor:a,borderBottomColor:"transparent",borderLeftColor:a,borderRightColor:a,display:"inline-block",animation:"".concat(x," ").concat(.75/v,"s 0s infinite linear"),animationFillMode:"both"},w);return i?m.createElement("span",u({style:A},P)):null}return l.default=C,l}var G=$();const K=E(G),Ve=()=>{const{projectId:u}=M(),f=L(),[p,c]=b.useState([]),[s,m]=b.useState([]),[d,y]=b.useState([]),[x,C]=b.useState(""),[t,r]=b.useState(!0),[i,e]=b.useState(!1);b.useEffect(()=>{(async()=>{var v,g,w;try{r(!0);const[h,j]=await Promise.all([D(),T()]);console.log("engResponse",h.data.data.workers),console.log("drvResponse",j.data.data.drivers),c(((v=h.data.data)==null?void 0:v.workers)||[]),m(((w=(g=j.data)==null?void 0:g.data)==null?void 0:w.drivers)||[])}catch(h){console.error("Error fetching team members:",h)}finally{r(!1)}})()},[]);const a=async()=>{if(d.length===0||!x){alert("Please select at least one worker and a driver");return}try{e(!0),await q(u,{workers:d,driverId:x}),f(`/app/project-view/${u}`)}catch(n){console.error("Error assigning team:",n)}finally{e(!1)}};return t?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx(K,{color:"#3b82f6",size:50})}):o.jsx("div",{className:"container mx-auto px-4 h-full",children:o.jsx(U,{header:"Assign Team to Project",headerClass:"text-lg font-bold",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-4",children:"Select Workers"}),o.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[p.map(n=>o.jsxs("div",{className:"flex items-center p-2 border rounded dark:border-gray-600",children:[o.jsx(F,{checked:d.includes(n._id),onChange:()=>{y(v=>v.includes(n._id)?v.filter(g=>g!==n._id):[...v,n._id])}}),o.jsx(B,{className:"ml-3",src:n.profileImage}),o.jsxs("span",{className:"ml-2 dark:text-gray-200",children:[n.firstName," ",n.lastName]})]},n._id)),p.length===0&&o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No available engineers"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-4 dark:text-gray-200",children:"Select Driver"}),o.jsxs("select",{value:x,onChange:n=>C(n.target.value),className:"w-full border border-gray-300 rounded p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[o.jsx("option",{value:"",className:"dark:bg-gray-700 dark:text-gray-200",children:"Choose a driver"}),s.map(n=>o.jsxs("option",{value:n._id,className:"dark:bg-gray-700 dark:text-gray-200",children:[n.firstName," ",n.lastName]},n._id))]}),s.length===0&&o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:"No available drivers"}),o.jsx("div",{className:"mt-8",children:o.jsx(I,{variant:"solid",loading:i,onClick:a,className:"w-full",disabled:p.length===0||s.length===0,children:"Assign Team"})})]})]})})})};export{Ve as default};
