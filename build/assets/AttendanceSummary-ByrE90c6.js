import{ak as g,r,j as t,a3 as y,b as N}from"./index-BxO48E7J.js";import"./Alert-DAYHHcTG.js";import{A as b}from"./index-D65Or3wn.js";import{B as v}from"./Badge-BDINMpeU.js";import{B as S}from"./Button-Cqs6OGDK.js";import"./Calendar-CZCjMlL9.js";import{C as A}from"./Card-BkELxnQG.js";import"./Skeleton-UhY8bWTz.js";import"./index-CbDZljJP.js";import"./Dialog-Y-f76L7n.js";import"./Drawer-C4WNb_Rb.js";import"./index-DPk-9BZv.js";import"./FormItem-BHnkbcAj.js";import"./useUniqueId-B5ZH9nmF.js";import"./Input-Bk_hBu-L.js";import"./index-CujXW8qQ.js";import"./index-DUubB36n.js";import{t as B}from"./toast-CyYsqkVZ.js";import"./Progress-B54yMz__.js";import"./index-ko3aNh7X.js";import"./ScrollBar-Dolz5Bqf.js";import"./index-BQv2iMDd.js";import"./Select-BKHxHb6S.js";import"./Upload-5TuzLRJ1.js";import{T}from"./index-Br-igED4.js";import"./Tag-oUmSLAu4.js";import"./index-DPAMRK6r.js";import{aO as _}from"./index-BvMts2N3.js";import{a as C}from"./api-Duj9fYUn.js";import"./Views-DNvf1mRE.js";import"./chart.config-Dntevg-Q.js";import"./DataTable-BY0GTXYv.js";import"./SvgIcon-RMdG7_sD.js";import"./SegmentItemOption-BFgyQbW2.js";import"./StatusIcon-DL8X5trP.js";import"./CloseButton-C69hR3t8.js";import"./proxy-Cgq6JklI.js";import"./floating-ui.react-BI-9OMXT.js";import"./floating-ui.dom-B_iSk-nO.js";import"./index-C5P6Zpzc.js";import"./context-BpXqFl7R.js";import"./useControllableState-Z-hTdTNR.js";import"./_getPrototype-CXL19Th3.js";import"./index-mlsqo1Ee.js";import"./index-Chjiymov.js";import"./toString-DS3ZSNMT.js";import"./chainedFunction-BxZSneMW.js";import"./index-Ci8JUJEH.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-Az_z3Foo.js";import"./index-VwH9CKQD.js";import"./index-BOBJKlrD.js";import"./cloneDeep-DJN0yfLA.js";import"./useThemeClass-CVckhmrY.js";const Et=()=>{const{projectId:s}=g(),[c,l]=r.useState(!0),[i,p]=r.useState([]),[m,x]=r.useState([]),[f,h]=r.useState({}),d=async()=>{try{l(!0);const e=await C(s);if(e.data&&e.data.data){const{users:o=[],summary:a=[],totals:u={}}=e.data.data;p(o),x(a);const n={...u};"date"in n&&delete n.date,h(n)}}catch(e){B.show({type:"danger",title:"Error fetching attendance summary",message:e.message||"Failed to load attendance data"})}finally{l(!1)}};r.useEffect(()=>{s&&d()},[s]);const j=e=>e===null?null:t.jsx(v,{content:e?"P":"A",innerClass:`${e?"bg-emerald-500":"bg-red-500"} text-white`});return c?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(y,{})}):t.jsx("div",{className:"container mx-auto px-4 h-full",children:t.jsx(A,{header:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsx("h4",{className:"text-lg font-bold",children:"Attendance Summary"}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(S,{variant:"plain",icon:t.jsx(_,{}),onClick:d,children:"Refresh"})})]}),children:t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs(T,{children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Date"}),i.map(e=>t.jsx("th",{className:"text-center",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx(b,{size:"sm",src:e.profileImage,className:"mb-1"}),t.jsx("span",{className:"text-xs whitespace-nowrap",children:e.name})]})},e._id))]})}),t.jsxs("tbody",{children:[m.map((e,o)=>t.jsxs("tr",{children:[t.jsx("td",{children:N(e.date).format("DD MMM YYYY")}),i.map(a=>t.jsx("td",{className:"text-center",children:j(e[a._id])},`${e.date}-${a._id}`))]},o)),m.length>0&&t.jsxs("tr",{className:"font-semibold bg-gray-50 dark:bg-gray-700",children:[t.jsx("td",{children:"Total Present"}),i.map(e=>t.jsx("td",{className:"text-center",children:f[e._id]||0},`total-${e._id}`))]})]})]}),m.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No attendance records found"})]})})})};export{Et as default};
