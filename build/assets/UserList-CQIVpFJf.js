import{a8 as U,a9 as $,aa as K,ab as M,a as F,j as e,r as h,a6 as B,m as D,ad as H}from"./index-DILgqWJA.js";import{a as V,b as q,u as G}from"./SalesService-BZ5wMlcy.js";import{A as _}from"./AdaptableCard-1Ir31AKW.js";import{A as Q}from"./index-SDeNNk5o.js";import{B as W}from"./Badge-BEoLkBel.js";import{D as X}from"./DataTable-r_Yr_eO-.js";import{I as J,T as Y,U as Z,V as ee,W as se,X as ae}from"./index-CkmhLFFZ.js";import{a as te}from"./index-CNBZGTEF.js";import{u as re}from"./useThemeClass-COrJaNxG.js";import{t as le,N as oe}from"./toast-C21ZMU7w.js";import{C as ie}from"./ConfirmDialog-DgYufMkt.js";import{d as ne}from"./debounce-CSGTMRrS.js";import{I as k}from"./Input-Dxk0DyPZ.js";import{b as ce}from"./api-C9gPmEo4.js";import{B as g}from"./Button-CrFFb1HK.js";import{F as de,a as j}from"./FormItem-B3r3kvbj.js";import{C as m}from"./Skeleton-ClXa3FSw.js";import{R as f}from"./index-DeHhTxJu.js";import{D as me}from"./Drawer-Fea6rgNO.js";import{F as ue,a as pe,b}from"./formik.esm-C25U-yEa.js";import"./Card-w1_DiXgz.js";import"./floating-ui.react-0XdfaH1n.js";import"./floating-ui.dom-D1IisfOw.js";import"./index-BJIBRJLK.js";import"./proxy-CGHHffYX.js";import"./index-DTKKhEmt.js";import"./index-Cit37NU4.js";import"./Select-MW_nRzI-.js";import"./hoist-non-react-statics.cjs-xIXYbZ5s.js";import"./Views-Bort5Yyy.js";import"./get-B6fDZCrK.js";import"./toString-ZniEQAva.js";import"./index-CjMdvxYV.js";import"./StatusIcon-CveerTQG.js";import"./CloseButton-B_sCjbKz.js";import"./chainedFunction-BxZSneMW.js";import"./Dialog-DcLUleBY.js";import"./index-s2HQo4yK.js";import"./index-Chjiymov.js";import"./isNil-Do1TtN__.js";import"./_getPrototype-CeE0_rZl.js";import"./cloneDeep-DJN0yfLA.js";const w="salesProductList",v=U(w+"/getProducts",async s=>(await V(s)).data),he=async s=>(await q(s)).data,A={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},xe={loading:!1,deleteConfirmation:!1,selectedProduct:"",productList:[],tableData:A,filterData:{name:"",category:["bags","cloths","devices","shoes","watches"],status:[0,1,2],productStatus:0}},L=$({name:`${w}/state`,initialState:xe,reducers:{updateProductList:(s,a)=>{s.productList=a.payload},setTableData:(s,a)=>{s.tableData=a.payload},setFilterData:(s,a)=>{s.filterData=a.payload},toggleDeleteConfirmation:(s,a)=>{s.deleteConfirmation=a.payload},setSelectedProduct:(s,a)=>{s.selectedProduct=a.payload}},extraReducers:s=>{s.addCase(v.fulfilled,(a,i)=>{a.productList=i.payload.data,a.tableData.total=i.payload.total,a.loading=!1}).addCase(v.pending,a=>{a.loading=!0})}}),{updateProductList:xs,setTableData:gs,setFilterData:ge,toggleDeleteConfirmation:P,setSelectedProduct:js}=L.actions,je=L.reducer,fe=K({data:je}),C=M,be=()=>{const s=F(),a=C(o=>o.salesProductList.data.deleteConfirmation),i=C(o=>o.salesProductList.data.selectedProduct),c=C(o=>o.salesProductList.data.tableData),l=()=>{s(P(!1))},t=async()=>{s(P(!1)),await he({id:i})&&(s(v(c)),le.push(e.jsx(oe,{title:"Successfuly Deleted",type:"success",duration:2500,children:"Product successfuly deleted"}),{placement:"top-center"}))};return e.jsx(ie,{isOpen:a,type:"danger",title:"Delete product",confirmButtonColor:"red-600",onClose:l,onRequestClose:l,onCancel:l,onConfirm:t,children:e.jsx("p",{children:"Are you sure you want to delete this product? All record related to this product will be deleted as well. This action cannot be undone."})})},Ce={true:{label:"Active",dotClass:"bg-emerald-500",textClass:"text-emerald-500"},false:{label:"Inactive",dotClass:"bg-red-500",textClass:"text-red-500"}},ve=({row:s})=>{const{textTheme:a}=re(),i=B(),c=()=>{i(`/app/user-form/${s._id}`)},l=()=>{i(`/app/user-view/${s==null?void 0:s._id}`)};return e.jsxs("div",{className:"flex justify-end text-lg",children:[e.jsx("span",{className:`cursor-pointer p-2 hover:${a}`,onClick:l,children:e.jsx(J,{})}),e.jsx("span",{className:`cursor-pointer p-2 hover:${a}`,onClick:c,children:e.jsx(Y,{})})]})},Ne=({row:s})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{src:s.profileImage,icon:e.jsx(te,{}),alt:`${s.firstName} ${s.lastName}`}),e.jsxs("span",{className:"ml-2 rtl:mr-2 font-semibold",children:[s.firstName," ",s.lastName]})]}),ye=()=>{var y,S;const s=h.useRef(null),[a,i]=h.useState(""),[c,l]=h.useState({page:1,limit:10}),{data:t,isLoading:o,error:d,refetch:n}=G({queryKey:["users",c.page,c.limit,a],queryFn:()=>ce({page:c.page,limit:c.limit,search:a})}),x=((y=t==null?void 0:t.data)==null?void 0:y.users)||[],u=((S=t==null?void 0:t.data)==null?void 0:S.pagination)||{total:0,page:1,limit:10,totalPages:1,hasNextPage:!1,hasPreviousPage:!1},T=h.useMemo(()=>ne(r=>{i(r),l(p=>({...p,page:1}))},500),[]),I=r=>{T(r.target.value)},z=h.useMemo(()=>[{header:"Name",accessorKey:"name",cell:r=>e.jsx(Ne,{row:r.row.original})},{header:"Email",accessorKey:"email",cell:r=>e.jsx("span",{children:r.row.original.email})},{header:"Phone Number",accessorKey:"phoneNumbers",cell:r=>{var p;return e.jsx("span",{children:((p=r.row.original.phoneNumbers)==null?void 0:p[0])||"N/A"})}},{header:"Role",accessorKey:"role",cell:r=>e.jsx("span",{className:"capitalize",children:r.row.original.role})},{header:"Status",accessorKey:"isActive",cell:r=>{const p=r.row.original.isActive,N=Ce[p.toString()];return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:N.dotClass}),e.jsx("span",{className:`capitalize font-semibold ${N.textClass}`,children:N.label})]})}},{header:"Action",id:"action",cell:r=>e.jsx(ve,{row:r.row.original})}],[]),O=r=>{l(p=>({...p,page:r}))},E=r=>{l(p=>({page:1,limit:r}))};return d?e.jsxs("div",{children:["Error loading users: ",d.message]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(k,{placeholder:"Search users...",onChange:I,className:"max-w-md"})}),e.jsx(X,{ref:s,columns:z,data:x,skeletonAvatarColumns:[0,3,4],skeletonAvatarProps:{className:"rounded-md"},loading:o,pagingData:{total:u.total,pageIndex:u.page,pageSize:u.limit},onPaginationChange:O,onSelectChange:E}),e.jsx(be,{})]})},R=h.forwardRef(({onSubmitComplete:s},a)=>{const i=F(),c=C(t=>t.salesProductList.data.filterData),l=t=>{s==null||s(),i(ge(t)),i(v(A))};return e.jsx(ue,{enableReinitialize:!0,innerRef:a,initialValues:c,onSubmit:t=>{l(t)},children:({values:t,touched:o,errors:d})=>e.jsx(pe,{children:e.jsxs(de,{children:[e.jsxs(j,{invalid:d.name&&o.name,errorMessage:d.name,children:[e.jsx("h6",{className:"mb-4",children:"Included text"}),e.jsx(b,{type:"text",autoComplete:"off",name:"name",placeholder:"Keyword",component:k,prefix:e.jsx(Z,{className:"text-lg"})})]}),e.jsxs(j,{invalid:d.category&&o.category,errorMessage:d.category,children:[e.jsx("h6",{className:"mb-4",children:"Product Category"}),e.jsx(b,{name:"category",children:({field:n,form:x})=>e.jsx(e.Fragment,{children:e.jsxs(m.Group,{vertical:!0,value:t.category,onChange:u=>x.setFieldValue(n.name,u),children:[e.jsxs(m,{className:"mb-3",name:n.name,value:"bags",children:["Bags"," "]}),e.jsxs(m,{className:"mb-3",name:n.name,value:"cloths",children:["Cloths"," "]}),e.jsxs(m,{className:"mb-3",name:n.name,value:"devices",children:["Devices"," "]}),e.jsxs(m,{className:"mb-3",name:n.name,value:"shoes",children:["Shoes"," "]}),e.jsxs(m,{name:n.name,value:"watches",children:["Watches"," "]})]})})})]}),e.jsxs(j,{invalid:d.status&&o.status,errorMessage:d.status,children:[e.jsx("h6",{className:"mb-4",children:"Product Category"}),e.jsx(b,{name:"status",children:({field:n,form:x})=>e.jsx(e.Fragment,{children:e.jsxs(m.Group,{vertical:!0,value:t.status,onChange:u=>x.setFieldValue(n.name,u),children:[e.jsxs(m,{className:"mb-3",name:n.name,value:0,children:["In Stock"," "]}),e.jsxs(m,{className:"mb-3",name:n.name,value:1,children:["Limited"," "]}),e.jsxs(m,{className:"mb-3",name:n.name,value:2,children:["Out Of Stock"," "]})]})})})]}),e.jsxs(j,{invalid:d.productStatus&&o.productStatus,errorMessage:d.productStatus,children:[e.jsx("h6",{className:"mb-4",children:"Product Status"}),e.jsx(b,{name:"productStatus",children:({field:n,form:x})=>e.jsxs(f.Group,{vertical:!0,value:t.productStatus,onChange:u=>x.setFieldValue(n.name,u),children:[e.jsx(f,{value:0,children:"Published"}),e.jsx(f,{value:1,children:"Disabled"}),e.jsx(f,{value:2,children:"Archive"})]})})]})]})})})}),Se=({onSaveClick:s,onCancel:a})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(g,{size:"sm",className:"mr-2",onClick:a,children:"Cancel"}),e.jsx(g,{size:"sm",variant:"solid",onClick:s,children:"Query"})]}),De=()=>{const s=h.useRef(null),[a,i]=h.useState(!1),c=()=>{i(!0)},l=()=>{i(!1)},t=()=>{var o;(o=s.current)==null||o.submitForm()};return e.jsxs(e.Fragment,{children:[e.jsx(g,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:e.jsx(ee,{}),onClick:()=>c(),children:"Filter"}),e.jsx(me,{title:"Filter",isOpen:a,footer:e.jsx(Se,{onCancel:l,onSaveClick:t}),onClose:l,onRequestClose:l,children:e.jsx(R,{ref:s,onSubmitComplete:l})})]})};R.displayName="FilterForm";const Pe=()=>e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[e.jsx(De,{}),e.jsx(D,{download:!0,className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",to:"/data/product-list.csv",target:"_blank",children:e.jsx(g,{block:!0,size:"sm",icon:e.jsx(se,{}),children:"Export"})}),e.jsx(D,{className:"block lg:inline-block md:mb-0 mb-4",to:"/app/user-new",children:e.jsx(g,{block:!0,variant:"solid",size:"sm",icon:e.jsx(ae,{}),children:"Add Staff"})})]});H("salesProductList",fe);const fs=()=>e.jsxs(_,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Staffs"}),e.jsx(Pe,{})]}),e.jsx(ye,{})]});export{fs as default};
