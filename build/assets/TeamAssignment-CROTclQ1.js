import{ac as R,P as E,aj as M,a6 as L,r as b,j as o}from"./index-CYREFKZG.js";import{e as D,f as T,g as q}from"./api-CGggFshI.js";import"./Alert-Cc8BV9-e.js";import{A as B}from"./index-lj_pQvB3.js";import"./Badge-C73elDoT.js";import{B as I}from"./Button-Bw5pwASe.js";import"./Calendar-WeLCs7zT.js";import{C as U}from"./Card-Dz-vhRoS.js";import{C as F}from"./Skeleton-C3msD0AC.js";import"./index-D7RG7uIP.js";import"./Dialog-SyL1UyQI.js";import"./Drawer-BPn271Vj.js";import"./index-DSWsvdkV.js";import"./FormItem-OC8YTe9a.js";import"./useUniqueId-usxbXFWg.js";import"./Input-CBtIewGG.js";import"./index-hkorcGQ3.js";import"./index-Duq-6sPR.js";import"./toast-D10MqJ5k.js";import"./Progress-5WwxyJN3.js";import"./index-Cx-cciMK.js";import"./ScrollBar-PLAgVGcK.js";import"./index-D5et0e9c.js";import"./Select-BXBkdm85.js";import"./Upload-BBmsRjVm.js";import"./index-Cy_ZD0YM.js";import"./Tag-DmHmgYE4.js";import"./index-fox4VSB4.js";import"./StatusIcon-D8Q-TRIc.js";import"./index-DxPdCp1M.js";import"./CloseButton-DcT37PEO.js";import"./proxy-B3X64ZJl.js";import"./floating-ui.react-Db-n4bhI.js";import"./floating-ui.dom-D1IisfOw.js";import"./index-DMrbObHh.js";import"./useControllableState-8Kzkpc2P.js";import"./get-t94M6iYX.js";import"./Views-CidN8ifI.js";import"./toString-BZ5q91vB.js";import"./_getPrototype-35SxlZMe.js";import"./index-BHcECQs3.js";import"./index-Chjiymov.js";import"./isNil-CbtC8I9H.js";import"./chainedFunction-BxZSneMW.js";import"./hoist-non-react-statics.cjs-D7IwvU7q.js";import"./index-CpO4fbZN.js";var l={},_={},N;function V(){if(N)return _;N=1,Object.defineProperty(_,"__esModule",{value:!0}),_.parseLengthAndUnit=f,_.cssValue=p;var d={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function f(c){if(typeof c=="number")return{value:c,unit:"px"};var s,m=(c.match(/^[0-9.]*/)||"").toString();m.includes(".")?s=parseFloat(m):s=parseInt(m,10);var u=(c.match(/[^0-9]*$/)||"").toString();return d[u]?{value:s,unit:u}:(console.warn("React Spinners: ".concat(c," is not a valid css value. Defaulting to ").concat(s,"px.")),{value:s,unit:"px"})}function p(c){var s=f(c);return"".concat(s.value).concat(s.unit)}return _}var O={},S;function W(){if(S)return O;S=1,Object.defineProperty(O,"__esModule",{value:!0}),O.createAnimation=void 0;var d=function(f,p,c){var s="react-spinners-".concat(f,"-").concat(c);if(typeof window>"u"||!window.document)return s;var m=document.createElement("style");document.head.appendChild(m);var u=m.sheet,y=`
    @keyframes `.concat(s,` {
      `).concat(p,`
    }
  `);return u&&u.insertRule(y,0),s};return O.createAnimation=d,O}var k;function $(){if(k)return l;k=1;var d=l&&l.__assign||function(){return d=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},d.apply(this,arguments)},f=l&&l.__createBinding||(Object.create?function(t,r,n,e){e===void 0&&(e=n);var a=Object.getOwnPropertyDescriptor(r,n);(!a||("get"in a?!r.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(t,e,a)}:function(t,r,n,e){e===void 0&&(e=n),t[e]=r[n]}),p=l&&l.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),c=l&&l.__importStar||function(){var t=function(r){return t=Object.getOwnPropertyNames||function(n){var e=[];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[e.length]=a);return e},t(r)};return function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var e=t(r),a=0;a<e.length;a++)e[a]!=="default"&&f(n,r,e[a]);return p(n,r),n}}(),s=l&&l.__rest||function(t,r){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.indexOf(e)<0&&(n[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(t);a<e.length;a++)r.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(t,e[a])&&(n[e[a]]=t[e[a]]);return n};Object.defineProperty(l,"__esModule",{value:!0});var m=c(R()),u=V(),y=W(),x=(0,y.createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function C(t){var r=t.loading,n=r===void 0?!0:r,e=t.color,a=e===void 0?"#000000":e,i=t.speedMultiplier,v=i===void 0?1:i,g=t.cssOverride,w=g===void 0?{}:g,h=t.size,j=h===void 0?35:h,P=s(t,["loading","color","speedMultiplier","cssOverride","size"]),A=d({background:"transparent !important",width:(0,u.cssValue)(j),height:(0,u.cssValue)(j),borderRadius:"100%",border:"2px solid",borderTopColor:a,borderBottomColor:"transparent",borderLeftColor:a,borderRightColor:a,display:"inline-block",animation:"".concat(x," ").concat(.75/v,"s 0s infinite linear"),animationFillMode:"both"},w);return n?m.createElement("span",d({style:A},P)):null}return l.default=C,l}var G=$();const K=E(G),Ie=()=>{const{projectId:d}=M(),f=L(),[p,c]=b.useState([]),[s,m]=b.useState([]),[u,y]=b.useState([]),[x,C]=b.useState(""),[t,r]=b.useState(!0),[n,e]=b.useState(!1);b.useEffect(()=>{(async()=>{var v,g,w;try{r(!0);const[h,j]=await Promise.all([D(),T()]);console.log("engResponse",h.data.data.workers),console.log("drvResponse",j.data.data.drivers),c(((v=h.data.data)==null?void 0:v.workers)||[]),m(((w=(g=j.data)==null?void 0:g.data)==null?void 0:w.drivers)||[])}catch(h){console.error("Error fetching team members:",h)}finally{r(!1)}})()},[]);const a=async()=>{if(u.length===0||!x){alert("Please select at least one worker and a driver");return}try{e(!0),await q(d,{workers:u,driverId:x}),f(`/app/project-view/${d}`)}catch(i){console.error("Error assigning team:",i)}finally{e(!1)}};return t?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx(K,{color:"#3b82f6",size:50})}):o.jsx("div",{className:"container mx-auto px-4 h-full",children:o.jsx(U,{header:"Assign Team to Project",headerClass:"text-lg font-bold",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-4",children:"Select Workers"}),o.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[p.map(i=>o.jsxs("div",{className:"flex items-center p-2 border rounded dark:border-gray-600",children:[o.jsx(F,{checked:u.includes(i._id),onChange:()=>{y(v=>v.includes(i._id)?v.filter(g=>g!==i._id):[...v,i._id])}}),o.jsx(B,{className:"ml-3",src:i.profileImage}),o.jsxs("span",{className:"ml-2 dark:text-gray-200",children:[i.firstName," ",i.lastName]})]},i._id)),p.length===0&&o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No available engineers"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-4 dark:text-gray-200",children:"Select Driver"}),o.jsxs("select",{value:x,onChange:i=>C(i.target.value),className:"w-full border border-gray-300 rounded p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[o.jsx("option",{value:"",className:"dark:bg-gray-700 dark:text-gray-200",children:"Choose a driver"}),s.map(i=>o.jsxs("option",{value:i._id,className:"dark:bg-gray-700 dark:text-gray-200",children:[i.firstName," ",i.lastName]},i._id))]}),s.length===0&&o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:"No available drivers"}),o.jsx("div",{className:"mt-8",children:o.jsx(I,{variant:"solid",loading:n,onClick:a,className:"w-full",disabled:p.length===0||s.length===0,children:"Assign Team"})})]})]})})})};export{Ie as default};
