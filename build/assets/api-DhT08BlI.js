import{an as s}from"./index-3DLZI4eB.js";const u=async()=>{try{return(await s.get("/shops")).data}catch(r){throw console.error("Error fetching shops:",r),r}},f=async()=>{try{return(await s.get("/categories")).data}catch(r){throw console.error("Error fetching categories:",r),r}},E=async()=>{try{return(await s.get("/vehicles")).data}catch(r){throw console.error("Error fetching categories:",r),r}},x=async({page:r,limit:e,search:a,billType:p,month:d,year:l,startDate:h,endDate:m,category:o,shop:n,vehicle:t,paymentMethod:c})=>{try{return(await s.get("/bills",{params:{page:r,limit:e,search:a,billType:p,month:d,year:l,startDate:h,endDate:m,category:o,shop:n,vehicle:t,paymentMethod:c}})).data}catch(i){throw console.error("Error fetching bills:",i),i}},v=async r=>{try{return await s.post("/bills/",r,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw console.error("Error adding user:",e),e}},A=async(r,e)=>{try{return await s.put(`/bills/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){throw console.error("Error editing user:",a),a}},S=async r=>{try{const e=await s.get(`/bills/${r}`);return{...e.data,attachments:Array.isArray(e.data.attachments)?e.data.attachments:e.data.attachments?[e.data.attachments]:[],category:e.data.category||{_id:"",name:""},shop:e.data.shop||{_id:"",shopName:""},billDate:e.data.billDate||new Date().toISOString().split("T")[0],amount:Number(e.data.amount)||0,invoiceNo:e.data.invoiceNo||"",remarks:e.data.remarks||"",paymentMethod:e.data.paymentMethod||""}}catch(e){throw console.error("Error fetching bill:",e),e}},k=async r=>{try{return await s.delete(`/bills/${r}`)}catch(e){throw console.error("Error deleting bill:",e),e}},O=async({search:r,billType:e,month:a,year:p,startDate:d,endDate:l,category:h,shop:m,vehicle:o,paymentMethod:n})=>{try{const t={search:r,billType:e,month:a,year:p,startDate:d?new Date(d).toISOString():void 0,endDate:l?new Date(l).toISOString():void 0,category:h,shop:m,vehicle:o,paymentMethod:n};Object.keys(t).forEach(b=>t[b]===void 0&&delete t[b]);const c=await s.get("/bills/export/excel",{params:t,responseType:"blob"});if(!c.data)throw new Error("No data received from server");const i=`bills_export_${e||"all"}_${new Date().toISOString().slice(0,10)}.xlsx`,w=window.URL.createObjectURL(new Blob([c.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),y=document.createElement("a");return y.href=w,y.setAttribute("download",i),document.body.appendChild(y),y.click(),setTimeout(()=>{document.body.removeChild(y),window.URL.revokeObjectURL(w)},100),!0}catch(t){console.error("Error exporting bills:",t);let c="Failed to export bills";throw t instanceof Error?c=t.message:typeof t=="string"&&(c=t),new Error(c)}},R=async({page:r,limit:e,search:a,reportType:p,month:d,year:l,startDate:h,endDate:m,category:o,shop:n})=>{try{return(await s.get("/bank",{params:{page:r,limit:e,search:a,reportType:p,month:d,year:l,startDate:h,endDate:m,category:o,shop:n}})).data}catch(t){throw console.error("Error fetching reports:",t),t}},D=async r=>{try{return await s.post("/bank/",r,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw console.error("Error adding Aadib report:",e),e}},B=async(r,e)=>{try{return await s.put(`/bank/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){throw console.error("Error editing Aadib report:",a),a}},I=async r=>{try{const e=await s.get(`/bank/${r}`);return{...e.data,reportDate:e.data.reportDate||new Date().toISOString().split("T")[0],amount:Number(e.data.amount)||0,category:e.data.category||{_id:"",name:""},shop:e.data.shop||{_id:"",shopName:""},remarks:e.data.remarks||""}}catch(e){throw console.error("Error fetching Aadib report:",e),e}},T=async r=>{try{return await s.delete(`/bank/${r}`)}catch(e){throw console.error("Error deleting Aadib report:",e),e}},_=async({search:r,billType:e,month:a,year:p,startDate:d,endDate:l,category:h,shop:m})=>{try{const o={search:r,billType:e,month:a,year:p,startDate:d?new Date(d).toISOString():void 0,endDate:l?new Date(l).toISOString():void 0,category:h,shop:m};Object.keys(o).forEach(w=>o[w]===void 0&&delete o[w]);const n=await s.get("/bank/export/excel",{params:o,responseType:"blob"});if(!n.data)throw new Error("No data received from server");const t=`bills_export_${e||"all"}_${new Date().toISOString().slice(0,10)}.xlsx`,c=window.URL.createObjectURL(new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),i=document.createElement("a");return i.href=c,i.setAttribute("download",t),document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i),window.URL.revokeObjectURL(c)},100),!0}catch(o){console.error("Error exporting bills:",o);let n="Failed to export bills";throw o instanceof Error?n=o.message:typeof o=="string"&&(n=o),new Error(n)}};export{T as a,f as b,E as c,k as d,O as e,u as f,x as g,S as h,A as i,v as j,R as k,_ as l,I as m,B as n,D as o};
